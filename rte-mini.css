/* /ui/rte-mini/rte-mini.css */
.ri { border:1px solid rgba(255,255,255,.10); border-radius:10px; background:rgba(255,255,255,.03); }
.ri-tools { display:flex; gap:6px; align-items:center; padding:6px; border-bottom:1px solid rgba(255,255,255,.10); }
.ri-btn { height:28px; padding:0 8px; border:1px solid rgba(255,255,255,.12); border-radius:6px; background:transparent; color:#e8eef2; cursor:pointer; }
.ri-btn:hover { background:rgba(255,255,255,.12); }
.ri-trigger { width:28px; height:28px; border:1px solid rgba(255,255,255,.12); border-radius:6px; background:#94a3b8; cursor:pointer; }
.ri-editor { min-height:120px; padding:10px; background:rgba(0,0,0,.15); border-radius:0 0 10px 10px; outline:none; }

/* модалка палитры */
.ri-modal-back { position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:9999; }
.ri-modal { background:#0b1220; border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:12px; width:280px; }
.ri-grid { display:grid; grid-template-columns:repeat(10, 22px); gap:8px; }
.ri-swatch { width:22px; height:22px; border-radius:6px; border:1px solid rgba(255,255,255,.18); cursor:pointer; }
#riColorBtn {
  background: conic-gradient(
    from 0deg,
    red, orange, yellow, green, cyan, blue, purple, red
  );
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow: 0 0 3px rgba(0,0,0,0.3);
}
/* Стили для новых модальных окон */
.ri-size-modal {
  width: 200px;
}

.ri-size-btn {
  display: block;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: #e8eef2;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s;
}

.ri-size-btn:hover {
  background: rgba(255,255,255,0.1);
}

.ri-heading-modal {
  width: 200px;
}

.ri-heading-btn {
  display: block;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: #e8eef2;
  text-align: left;
  cursor: pointer;
  transition: background 0.2s;
}

.ri-heading-btn:hover {
  background: rgba(255,255,255,0.1);
}

.ri-heading-btn h1,
.ri-heading-btn h2,
.ri-heading-btn h3,
.ri-heading-btn h4,
.ri-heading-btn h5,
.ri-heading-btn h6 {
  margin: 0;
  padding: 0;
  line-height: 1.2;
}

/* Стили для кнопок форматирования */
.ri-btn b, .ri-btn i, .ri-btn u, .ri-btn s {
  pointer-events: none;
}
/* RTE: делаем ту же нормализацию, что и на сцене */
.ri-editor p,
.ri-editor h1,
.ri-editor h2,
.ri-editor h3,
.ri-editor h4,
.ri-editor h5,
.ri-editor h6,
.ri-editor ul,
.ri-editor ol {
  margin: 0;
  padding: 0;
}

.ri-editor li { margin: 0 0 .35em; }
.ri-editor p + p { margin-top: .35em; }
.props-horizontal #rteMini { flex: 0 0 560px; width: 560px; }

/* === Text Animations for RTE Mini === */
.ta { display: inline; }

/* Появление */
@keyframes ta-appear-kf {
  from { opacity: 0; transform: translateY(0.35em); }
  to   { opacity: 1; transform: none; }
}
.ta-appear { animation: ta-appear-kf .6s ease both; }

/* Мерцание прозрачности */
@keyframes ta-blink-kf {
  0%, 49% { opacity: 1; }
  50%,100%{ opacity: 0; }
}
.ta-blink { animation: ta-blink-kf 1s step-start infinite; }

/* Мигание цвета */
@keyframes ta-colorcycle-kf {
  0%   { color: var(--ta-origin, currentColor); }
  25%  { color: #ff1744; }
  50%  { color: #ff9100; }
  75%  { color: #2979ff; }
  100% { color: var(--ta-origin, currentColor); }
}
.ta-colorcycle { animation: ta-colorcycle-kf 2s linear infinite; }

/* Попап-меню выбора анимации (используем стили модалки RTE) */
.ri-list { display: grid; gap: 6px; }
.ri-list .ri-list-btn {
  display: block; width: 100%;
  padding: 8px 10px; border: none; border-radius: 8px;
  background: transparent; color: #e8eef2; text-align: left; cursor: pointer;
}
.ri-list .ri-list-btn:hover { background: rgba(255,255,255,.08); }

@media (prefers-reduced-motion: reduce) {
  .ta-appear, .ta-blink, .ta-colorcycle { animation: none !important; }
}
/* === В КОНЕЦ файла /ui/rte-mini/rte-mini.css === */

/* Кнопка "Обернуть" */
.ri-btn.ri-beautify {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  font-weight: 600;
  border: none;
}

.ri-btn.ri-beautify:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(102,126,234,0.4);
}

/* --- Mobile text fixes: prevent per-letter breaks, match front-end --- */
@media (max-width:480px){
  .el[data-type="text"]{
    word-break: normal !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
    white-space: normal !important;
    hyphens: auto !important;
    line-height: 1.3 !important;
    font-size: 16px !important;
  }
  .el[data-type="text"] p,
  .el[data-type="text"] h1,
  .el[data-type="text"] h2,
  .el[data-type="text"] h3,
  .el[data-type="text"] h4,
  .el[data-type="text"] h5,
  .el[data-type="text"] h6,
  .el[data-type="text"] ul,
  .el[data-type="text"] ol { margin: 0 !important; padding: 0 !important; }
  .el[data-type="text"] li { margin: 0 0 .35em !important; }
  .el[data-type="text"] p + p { margin-top: .35em !important; }
}
/* === HTML Preview Modal Import === */
@import url('/../html-preview/html-preview-modal.css');
/* Изоляция для редактируемого HTML */
.html-editable-wrapper {
  display: block !important;
  position: relative !important;
  padding: 12px !important;
  border: 1px dashed rgba(255,255,255,0.2) !important;
  border-radius: 8px !important;
  margin: 8px 0 !important;
  min-height: 50px !important;
  max-height: none !important;
  overflow: visible !important;
  isolation: isolate;
  /* background: transparent !important; ← УДАЛИТЬ эту строку */
}

/* Стили внутри wrapper должны работать, но визуально скрываться */
.html-editable-wrapper style {
  display: block !important;
  position: absolute !important;
  width: 0 !important;
  height: 0 !important;
  opacity: 0 !important;
  pointer-events: none !important;
  overflow: hidden !important;
}

/* Все элементы внутри wrapper наследуют изоляцию */
.html-editable-wrapper * {
  box-sizing: border-box;
}